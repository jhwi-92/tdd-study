- 쉬운 경우에서 어려운 경우로 진행
	- 모든 규칙을 충족하는 경부보다 한 규칙만 충족하거나 두 규칙을 충족하는 경우가 쉽다.
- 예외적인 경우에서 정상인 경우로 진행
	- 예외처리하지 않으면 NPE가 발생할 수 있다.

## 지속적인 리팩토링
- TDD를 진행하는 과정에서 지속적으로 리팩토링을 진행하면 코드 가독성이 높아진다.
- 소프트웨어 생존 시간이 길어질수록 소프트웨어를 지속적으로 개선해야 한다.
- 코드 변경이 어려우면 변화하는 요구를 제때 반영할 수 없게 된다.
- 자세한 내용 할고 싶으면 [<리팩토링> by 마틴 파울러]([리팩터링 | 마틴 파울러 - 교보문고 (kyobobook.co.kr)](https://product.kyobobook.co.kr/detail/S000001810241))

## 테스트 작성 순서 연습 
- 서비스를 사용하려면 매달 1만원을 선불로 납부한다. 납부일 기준으로 한달 뒤가 서비스 만료된다.
- 2개월 이상 요금을 납부할 수 있다.
- 10만원을 납부하면 서비스를 1년 제공한다.
### 예를 추가하면서 일반화
- 여러 시나리오를 추가하여 일반화 한다.
## 예외 상황 처리
- 납부일이 2019-01-31이고 납부액이 1만원이면 만료일은 2019-02-28이다.
- 납부일이 2019-05-31이고 납부액이 1만원이면 만료일은 2019-06-30이다.
- 납부일이 2020-01-31이고 납부액이 1만원이면 만료일은 2020-02-29이다.
- LocalDate#plusMonths() 메서드가 알아서 한달 추가 처리 해준다.

## 예외 상황 처리 2
- 2만원을 지불하면 만료일이 두 달 뒤가 된다.
- 3만원을 지불하면 만료일이 세 달 뒤가 된다.

## 리팩토링
파라미터가 세개로 늘어날 경우, 객체로 바꿔 한 개로 줄이는 것을 고려한다.

## 예외 상황 처리 3
- 첫 납부일이 2019-01-31이고 만료되는 2019-02-28에 1만원을 납부하면 다음 만료일은 2019-03-31이다.

## 코드 정리 : 상수를 변수로

## 테스트 : 쉬운 테스트
- 2만원을 지불하면 만료일이 두달 뒤가 된다.
- 3만원을 지불하면 만료일이 세달 뒤가 된다.

## 예외 상황 처리 4
- 첫 납부일이 2019-01-31이고 만료되는 2019-02-28에 2만원을 납부하면 다음 만료일은 2019-04-30이다.
	- 예외 처리 테스트 실패를 하는데 4월 31일이 없는데 31로 설정해서 실패하게 된다.

## 테스트 : 10개월 요금 납부 시 1년 제공

## 테스트할 목록 정리하기
- TDD 시작할 때 테스트할 목록을 미리 정리하면 좋다.
	- 1만원 납부하면 한 달 뒤가 만료일
	- 달의 마지막 날에 납부하면 다음날 마지막 날이 만료일
	- 2만원 납부하면 2개월 뒤가 만료일
	- 3만원 납부하면 3개월 뒤가 만료일
	- 10만원 납부하면 1년 뒤가 만료일
- 정리한 목록에서 어떤 테스트가 구현하기 쉬울지 계획한다.

## 시작이 안될 때
- 검증하는 코드부터 작성
```
@Test
void 만원_납부하면_한달_뒤가_만료일이_됨(){
	//처음 작성하는 코드
	assertEquals(기대하는만료일, 실제만료일);
	//
	assertEquals(LocalDate.of(2019,8,9), 실제만료일);
	//
	LocalDate realExpiryDate = 계산하기
	assertEquals(LocalDate.of(2019,8,9), realExpiryDate);
	//
	LocalDate realExpiryDate = cal.calculateExpiryDate(파라미터)
	assertEquals(LocalDate.of(2019,8,9), realExpiryDate);
	//
	LocalDate realExpiryDate = cal.calculateExpiryDate(LocalDate.of(2019,7,9). 10_000)
	assertEquals(LocalDate.of(2019,8,9), realExpiryDate);
	//
	ExpiryDateCalculator cal = new ExpiryDateCalculator();
	LocalDate realExpiryDate = cal.calculateExpiryDate(LocalDate.of(2019,7,9). 10_000)
	assertEquals(LocalDate.of(2019,8,9), realExpiryDate);
}
```

## 구현이 막히면
- 어떻게 해야 할지 생각이 잘 나지 않거나 무언가 잘못한 것 같은 느낌이 들 때
	과감히 코드를 지우고 미련 없이 다시 시작한다.
	- 쉬운 테스트, 예외적인 테스트
	- 완급조절