# 기능 명세
기능에 대한 명세는 다양한 형태로 존재한다.<br>
어떤 형태가 되든 간에 사용자에게 제공할 기능을 구현하려면 기능을 크게 두 가지로 나누어 생각해 볼 수 있다. 바로 `입력과 결과`다. <br>

예를 들어 로그인 기능을 생각해보자.
* 입력 : 아이디와 암호
* 결과 : 아이디와 암호가 일치하면 성공, 일치하지 않으면 실패
<br>

`입력`은 기능을 실행하는데 필요한 값이다. <br>
`결과`는 로그인의 성공 또는 실패다. <br>

결과는 여러 형식으로 정의할 수 있는데 가장 쉽게 생각할 수 있는 결과 형식은 `리턴 값`이다. <br>

익셉션을 결과로 사용할 수도 있다.<br>
예를 들어 로그인 기능을 구현할 때 인증에 실패하면 IdPwNotMatchException을 발생할 수 있다.
````java
public void login(String id, String pw){
    User user = getUser(id);
    if(!user.matchPassword(pw)){
        // 익셉션을 결과로 사용
        throw new IdPwNotMatchException();
    }
}
````

기능 실행 결과에는 `변경`도 포함한다.<br>
예를 들어 `회원 가입 기능`은 실행 결과로 DB에 회원 정보를 추가한다.<br>
DB에 데이터를 추가하는 것은 값을 리턴하는 것과 달리 시스템의 상태를 변경한다. 이런 변경은 리턴 값으로는 결과를 알 수 없기 때문에 테스트 대상을 실행한 뒤에는 변경 대상에 접근해서 결과를 확인해야 한다. <br>
회원 가입 기능은 상황에 따라 다른 결과를 갖는다.
* 이미 동일한 ID가 존재하는 상황
  * 결과로 익셉션을 발생한다.
* 동일한 ID가 존재하지 않는 상황
  * 가입에 성공하면 결과로 회원 일련번호를 리턴하고 정보를 DB에 저장한다. 
<br>

설계는 `기능 명세`로부터 시작한다. <br>
스토리보드를 포함한 다양한 형태의 요구사항 문서를 이용해서 기능 명세를 구체화한다.<br>
기능 명세를 구체화하는 동안 입력과 결과를 도출하고 기능 명세를 코드에 반영한다. 

# 설계 과정을 지원하는 TDD
TDD는 **테스트를 만드는 것**부터 시작한다. <br>
테스트 코드를 먼저 만들기 위해서는 다음 두 가지를 할 수 있어야 한다. 
* 테스트할 기능을 실행
* 실행 결과를 검증
<br>

기능을 실행할 수 없으면 테스트를 할 수 없다. 
* 테스트는 기능을 실행한 결과를 검증하는 것
* 테스트 코드에서 기능을 실행할 수 있어야 한다. <br>(테스트에서 실행할 수 있는 객체나 함수가 존재해야 함)

실행할 객체가 존재하려면 객체를 생성할 때 사용할 클래스, 실행할 메서드가 필요하다. <br>
즉, 테스트 대상이 되는 `클래스와 메서드의 이름`을 결정해야 하며, 메서드를 실행할 때 `사용할 인자의 타입과 개수`를 결정해야 한다. <br>

이는 곧 `설계 과정`이다. 
<br>
TDD에서 테스트 코드를 작성할 대 고민하는 것과 설계 과정에서 고민하는 것은 겹치는 부분이 있다.
즉 TDD 자체가 설계는 아니지만, TDD를 하다 보면 테스트 코드를 작성하는 과정에서 일부 설계를 진행하게 된다. 

## 필요한 만큼 설계하기
TDD는 필요할 것으로 예측해서 미리 코드를 만들지 않고 `테스트를 통과할 만큼`만 코드를 작성한다.<br>

이는 설계에서도 동일하게 적용된다. 실제 테스트 사례를 추가하고 통과시키는 과정에서 필요한 만큼 설계를 변경한다.<br>

기능 실행 결과도 동일하게 테스트를 진행하는 과정에서 실제 익셉션이 필요한 시점에 익셉션을 도출한다.<br>

TDD로 개발을 진행하면 현시점에서 테스트를 통과시키는데 필요한 만큼의 코드만 만들게 된다. <br>
유연한 설계는 필요한 시점에 추가하게 되며 이를 통해 설계가 불필요하게 복잡해지는 것을 방지할 수 있다. <br>

필요한 만큼 설계를 한다고 해서 사전에 설계 활동을 생략하는 것은 아니다.<br>
요구사항을 분석하는 과정에서 진행하는데 이때 설계한 결과물은 초안에 불과하다. <br>

최초 요구사항은 시간이 지나면 변하기 마련이다. TDD는 미리 앞서서 코드를 만들지 않으므로 불필요한 구성 요소를 덜 만들게 된다. 

# 기능 명세 구체화
테스트 코드를 작성하기 위해 개발자는 기능 명세를 정리해야 한다.
* 보통 스토리보드나 와이어프레임과 같은 형태로 전달 받음
<br>

테스트 코드를 작성하려면 파라미터와 같은 결과 값을 정해야 하므로 개발자는 요구사항 문서에서 기능의 입력과 결과를 도출해야 한다.<br>
* 다양한 테스트 사례를 추가하는 과정에서 구현하기 애매한 점을 발견한다면 기획자나 실무 담당자와 얘기해서 구체적으로 정리해야 한다.
* 테스트 코드는 구체적인 입력과 결과를 이용해 작성하므로 예를 통해 기능 명세를 구체화하게 된다. 
<br>

테스트 코드는 바로 실행할 수 있다. 
* 구체적인 예시를 통해 기능을 바로 실행해 볼 수 있으며 이는 유지보수에 큰 도움이 된다. 
<br>

특정 상황에서 코드가 어떻게 동작하는지 이해하고 싶다면 해당 상황을 검증하는 테스트를 실행하고 이해가 필요한 코드를 추적하면 된다.